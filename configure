#!/bin/sh

###
## This script will try and find the best possible wish shell to use for
## Visual Tcl.  Once found, it will write out a start-up script for starting
## vTcl.
###

##
## Try to find the best possible wish.
##
findwish( ) {
WISHES=" \
	wish8.5 \
	wish8.4 \
	wish8.3 \
	wish8.2 \
	wish8.1 \
	wish8.0 \
	wishx	\
	expectk \
"

DIRS=" `echo $PATH | sed -e 's/:/ /g'` \
	/usr/local/bin	\
	/usr/bin	\
	/bin		\
	/opt/local/bin	\
	/opt/bin	\
"

for wish in $WISHES
do
  for dir in $DIRS
  do
    if [ -x $dir/$wish ]; then
      WISH=$dir/$wish
      return 1
    fi
  done
done

return 0

}

findwish

if [ -z "$WISH" ]; then
  echo "Could not find wish"
  exit 1
fi

cat > vtcl << EOF
#!/bin/sh

PATH_TO_WISH=$WISH
VTCL_HOME=/opt/local/src/vtcl

export PATH_TO_WISH
export VTCL_HOME

exec \${PATH_TO_WISH} \${VTCL_HOME}/vt.tcl \$*
EOF
